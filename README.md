# DesktopLobby

**è®©ä½ çš„æ¡Œé¢"æ´»"èµ·æ¥â€”â€”ä¸ã€Šç¢§è“æ¡£æ¡ˆã€‹ä¸­çš„å­¦ç”Ÿç›¸ä¼´çš„æ¯ä¸€å¤©ã€‚**

DesktopLobby æ˜¯ä¸€æ¬¾åŸºäº Python å¼€å‘çš„æ¡Œé¢ç¾åŒ–åº”ç”¨ï¼Œçµæ„Ÿæºè‡ªã€Šç¢§è“æ¡£æ¡ˆã€‹çš„ä¸»ç•Œé¢å¤§å…ã€‚å®ƒä¸ä»…å°†ä½ å–œçˆ±çš„å­¦ç”Ÿ"å€¼æ—¥å‘˜"å¸¦åˆ°æ¡Œé¢ä¸Šï¼Œæ›´é€šè¿‡æ™ºèƒ½å¯¹è¯ä¸åŠ¨æ€äº¤äº’ï¼Œä¸ºä½ å¸¦æ¥çœŸå®è€Œæ¸©æš–çš„é™ªä¼´ä½“éªŒã€‚å‘Šåˆ«åŸç‰ˆå›ºå®šçš„å¸ƒå±€ä¸å°è¯ï¼Œè¿™é‡Œçš„ä¸€åˆ‡ç”±ä½ å®šä¹‰ï¼šè‡ªç”±åˆ‡æ¢è§’è‰²è¡¨æƒ…ã€éšæ„è°ƒæ•´ä½ç½®ä¸å¤§å°ï¼Œæ›´å¯çªç ´é¢„è®¾å¯¹è¯çš„é™åˆ¶ï¼Œå€ŸåŠ© AI ä¸å­¦ç”Ÿå±•å¼€**è½»æ¾ã€è‡ªç„¶ã€éšå¿ƒæ‰€æ¬²**çš„æ—¥å¸¸èŠå¤©ã€‚

[English Version](#english-version)

## âœ¨ ä¸»è¦ç‰¹è‰²

- **çµåŠ¨è§’è‰²**ï¼šæ”¯æŒåŠ è½½å¤šä¸ª 2D è§’è‰²ï¼Œæ¯ä¸ªè§’è‰²æ‹¥æœ‰ç‹¬ç«‹çš„è¡¨æƒ…ç³»ç»Ÿä¸å¹³æ»‘åŠ¨ç”»ã€‚
- **æ™ºèƒ½å¯¹è¯**ï¼šé€šè¿‡å¯è‡ªå®šä¹‰æ ·å¼ä¸ä½ç½®çš„å¯¹è¯æ°”æ³¡ï¼Œè§’è‰²ä¼šä¸ä½ ä¸»åŠ¨äº¤æµï¼Œä¹Ÿéšæ—¶å€¾å¬ä½ çš„å¿ƒå£°ã€‚
- **æ²‰æµ¸èƒŒæ™¯**ï¼šåŠ¨æ€èƒŒæ™¯çª—å£å°†åµŒå…¥ç³»ç»Ÿå£çº¸ä¹‹ä¸Šã€å›¾æ ‡ä¹‹ä¸‹ï¼Œè¥é€ æ— ç¼çš„æ¡Œé¢æ²‰æµ¸æ„Ÿã€‚
- **è®°å¿†æ°¸å­˜**ï¼šæ‰€æœ‰èŠå¤©è®°å½•ã€è§’è‰²çŠ¶æ€ä¸è®¾ç½®å‡å®‰å…¨å­˜å‚¨äºæœ¬åœ°æ•°æ®åº“ï¼Œé™ªä¼´çš„ç‚¹ç‚¹æ»´æ»´çš†å¯å›æº¯ã€‚
- **AI éšå¿ƒèŠ**ï¼šå†…ç½®å¤šæ¬¾ AI æ¨¡å‹æ”¯æŒï¼ˆå¦‚ qwenï¼‰ï¼Œå¹¶é‡‡ç”¨æ’ä»¶å¼æ¨¡æ¿è®¾è®¡ï¼Œæœªæ¥æ‰©å±•æ–°æ¨¡å‹è½»æ¾æ— å‹åŠ›ã€‚
- **æ·±åº¦è‡ªå®šä¹‰**ï¼šé€šè¿‡ç›´è§‚çš„ JSON é…ç½®æ–‡ä»¶ï¼Œç»†è‡´è°ƒèŠ‚å­—ä½“ã€å¤§å°ã€åŠ¨ç”»é€Ÿåº¦â€¦â€¦æ‰“é€ ç‹¬ä¸€æ— äºŒçš„æ¡Œé¢ä¼™ä¼´ã€‚

## ğŸ›  æŠ€æœ¯æ¶æ„

- **Python** â€“ æ ¸å¿ƒå¼€å‘è¯­è¨€
- **PySide6** â€“ ç°ä»£åŒ–è·¨å¹³å° GUI æ¡†æ¶
- **Pillow (PIL)** â€“ å›¾åƒå¤„ç†ä¸æ¸²æŸ“
- **pygame.mixer** â€“ èƒŒæ™¯éŸ³ä¹ä¸éŸ³æ•ˆæ’­æ”¾
- **peewee** â€“ è½»é‡çº§ ORMï¼Œç®¡ç† SQLite æ•°æ®åº“
- **ruamel.yaml** â€“ è§£æ Unity å¯¼å‡ºçš„åŠ¨ç”» YAML æ–‡ä»¶
- **scipy & numpy** â€“ å®ç°æµç•…çš„æ’å€¼åŠ¨ç”»ï¼Œç²¾å‡†è¿˜åŸ Unity åŠ¨ç”»æ•ˆæœ
- **openai / llama_cpp_python** â€“ æ”¯æŒäº‘ç«¯ä¸æœ¬åœ° AI æ¨¡å‹ï¼Œé©±åŠ¨æ™ºèƒ½å¯¹è¯

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

1.  **è·å–ä»£ç **
    ```bash
    git clone https://github.com/LjcYounger/DesktopLobby.git
    cd DesktopLobby
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    pip install -r requirements.txt
    ```

3.  **ç«‹å³å¯åŠ¨**
    ```bash
    python main.py
    ```
    ä½ çš„ç¬¬ä¸€ä½æ¡Œé¢ä¼™ä¼´å³å°†ä¸Šçº¿ï¼

## ğŸ¨ ä¸ªæ€§åŒ–å®šåˆ¶

### ğŸ¤– æ·»åŠ æ–°çš„ AI æ¨¡å‹
DesktopLobby æä¾›äº†å‹å¥½çš„å›¾å½¢åŒ–é…ç½®ç•Œé¢ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨è®¾ç½®ä¸­æ·»åŠ å¹¶é…ç½®æ–°çš„ AI æ¨¡å‹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚

### ğŸ‘¥ æ·»åŠ æ–°è§’è‰²
ç›®å‰è§’è‰²ç³»ç»ŸåŸºäº Spine åŠ¨ç”»ï¼Œç”±äº Spine å®˜æ–¹è¿è¡Œæ—¶åº“å°šæœªæ”¯æŒ Pythonï¼Œ**æš‚æ— æ³•ç›´æ¥æ·»åŠ æ–°çš„ Spine è§’è‰²**ã€‚æˆ‘ä»¬æ­£åœ¨ç§¯ææ¢ç´¢å¯è¡Œçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šè§’è‰²å¯¼å…¥æ–¹å¼ã€‚

## ğŸ”Œ å¤–éƒ¨è¾“å…¥æ”¯æŒ
ç¨‹åºå¯åŠ¨åï¼Œä¼šåœ¨ `localhost` ä¸Šè‡ªåŠ¨å°è¯•å¼€å¯ Socket ç›‘å¬ï¼ˆç«¯å£èŒƒå›´ 10000â€“10009ï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡å‘é€å¤–éƒ¨ä¿¡å·ä¸ç¨‹åºäº¤äº’ï¼Œå®ç°æ›´çµæ´»çš„è‡ªåŠ¨åŒ–æ§åˆ¶æˆ–ç¬¬ä¸‰æ–¹é›†æˆã€‚

## ğŸŒˆ æœªæ¥å±•æœ›

1.  **å¤šè§’è‰²äº’åŠ¨**ï¼šè®©æ¡Œé¢ä¸Šçš„å­¦ç”Ÿä»¬èƒ½å¤Ÿå½¼æ­¤äº¤è°ˆï¼Œè¥é€ æ›´ç”ŸåŠ¨çš„åœºæ™¯æ°›å›´ã€‚
2.  **Spine è§’è‰²æ”¯æŒ**ï¼šè®¡åˆ’é€šè¿‡å†…åµŒ HTML å¼•æ“ï¼ˆå¦‚ä½¿ç”¨ spine-ts è¿è¡Œæ—¶ï¼‰å®ç°å¯¹ Spine è§’è‰²çš„å®Œæ•´æ”¯æŒï¼Œçªç ´å½“å‰çš„æŠ€æœ¯é™åˆ¶ã€‚

---

<a id="english-version"></a >
# DesktopLobby

**Bring your desktop to life â€” everyday companionship with students from *Blue Archive*.**

DesktopLobby is a Pythonâ€‘based desktop customization application inspired by the main lobby of *Blue Archive*. It brings your favorite student "duty officers" onto your desktop, offering not just a visual presence but also intelligent conversation and dynamic interaction for a genuinely warm companion experience. Move beyond the original game's fixed layouts and lines â€” here everything is yours to define: freely switch character expressions, adjust position and size at will, and go beyond preset dialogues to have **casual, natural, and freeâ€‘flowing** daily chats with students powered by AI.

## âœ¨ Features

- **Lively Characters** â€“ Load multiple 2D characters, each with independent expression systems and smooth animations.
- **Smart Dialogue** â€“ Characters communicate through customizable speech bubbles, initiating conversations and always ready to listen.
- **Immersive Background** â€“ A dynamic background window embeds between your wallpaper and desktop icons, creating a seamless immersive experience.
- **Persistent Memory** â€“ All chat history, character states, and settings are securely stored in a local database, so every moment of companionship can be revisited.
- **AIâ€‘Powered Chats** â€“ Builtâ€‘in support for multiple AI models (e.g., qwen) with a pluginâ€‘style template system, making future model extensions effortless.
- **Deep Customization** â€“ Fineâ€‘tune fonts, sizes, animation speed, and more through intuitive JSON configuration files â€” create a desktop companion that is uniquely yours.

## ğŸ›  Tech Stack

- **Python** â€“ Core programming language
- **PySide6** â€“ Modern crossâ€‘platform GUI framework
- **Pillow (PIL)** â€“ Image processing and rendering
- **pygame.mixer** â€“ Background music and sound effects
- **peewee** â€“ Lightweight ORM for SQLite database management
- **ruamel.yaml** â€“ Parses animation YAML files exported from Unity
- **scipy & numpy** â€“ Enable smooth interpolation animations, accurately reproducing Unity animation effects
- **openai / llama_cpp_python** â€“ Support for cloud and local AI models, powering intelligent conversations

## ğŸš€ Quick Start

1.  **Clone the repository**
    ```bash
    git clone https://github.com/LjcYounger/DesktopLobby.git
    cd DesktopLobby
    ```

2.  **Install dependencies**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Run the application**
    ```bash
    python main.py
    ```
    Your first desktop companion is about to appear!

## ğŸ¨ Customization

### ğŸ¤– Adding New AI Models
DesktopLobby provides a userâ€‘friendly graphical configuration interface. You can add and configure new AI models directly in the settings â€” no code changes required.

### ğŸ‘¥ Adding New Characters
The current character system is built on Spine animations. Because the official Spine runtime does not yet support Python, **adding new Spine characters directly is not currently possible**. We are actively exploring feasible technical solutions and plan to support more character import methods in the future.

## ğŸ”Œ External Input Support
After startup, the program automatically attempts to open a Socket listener on `localhost` (ports 10000â€“10009). You can send external signals to interact with the application, enabling more flexible automation or thirdâ€‘party integration.

## ğŸŒˆ Future Plans

1.  **Multiâ€‘character Interaction** â€“ Allow students on the desktop to talk with each other, creating a more lively scene atmosphere.
2.  **Spine Character Support** â€“ Plan to introduce full Spine character support by embedding an HTML engine (e.g., using spineâ€‘ts runtime), overcoming current technical limitations.

## ğŸ“„ License
This project is licensed under the MIT License. You are welcome to use and contribute freely.

## ğŸ¤ Contributions & Feedback
If you have ideas, find bugs, or want to contribute, feel free to open an Issue or submit a Pull Request! Let's build a better desktop companionship experience together.